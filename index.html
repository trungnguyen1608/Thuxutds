<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>TOOL SMS FREE â€” MR TRUNG VIP</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;background:#f3f6fb;margin:0;padding:24px;display:flex;justify-content:center}
    .container{width:100%;max-width:980px;background:#fff;border-radius:12px;box-shadow:0 8px 30px rgba(2,6,23,0.06);overflow:hidden}
    header{display:flex;flex-direction:column;align-items:stretch}
    .topline{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;background:linear-gradient(90deg,#0b6efd,#0658d9);color:#fff}
    .logo{font-weight:700}
    .guide-btn{cursor:pointer;background:#fff;color:#0b6efd;font-weight:bold;border-radius:6px;padding:4px 8px}
    .vip-banner{background:#ffefc9;color:#b35900;font-weight:800;text-align:center;border-top:4px solid #ffd58a;padding:10px;font-size:16px}
    main{padding:20px}
    .card{background:#fff;padding:14px;margin-bottom:12px;border-radius:10px;border:1px solid #f1f5f9;box-shadow:0 6px 18px rgba(2,6,23,0.04)}
    label{display:block;margin-top:10px;font-weight:600}
    input,textarea,button{width:100%;padding:10px;margin-top:6px;border:1px solid #e6eefb;border-radius:8px;font-size:14px}
    button.primary{background:#ff6b35;color:#fff;border:0;cursor:pointer;font-weight:800}
    .tabs{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap;align-items:center}
    .tabs button{width:auto;padding:8px 12px;border-radius:8px;background:#f3f7ff;border:1px solid #e6efff;cursor:pointer}
    #btnLogout{background:#f33;color:#fff;display:none}
    .hidden{display:none}
    .progress{margin-top:8px;color:#0b6efd}
    table{width:100%;border-collapse:collapse;margin-top:10px;font-size:14px}
    th,td{border-bottom:1px solid #eee;padding:6px;text-align:left}
    /* Popup hÆ°á»›ng dáº«n */
    #guideModal{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.5);display:none;align-items:center;justify-content:center;z-index:999}
    .guide-box{background:#fff;border-radius:10px;max-width:400px;width:90%;padding:20px;box-shadow:0 6px 20px rgba(0,0,0,0.2)}
    .close-btn{background:#f33;color:#fff;border:none;padding:8px 12px;border-radius:6px;cursor:pointer;float:right}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="topline">
        <div class="logo">TOOL SMS FREE</div>
        <div class="guide-btn" id="openGuide">ğŸ“– HÆ°á»›ng dáº«n</div>
      </div>
      <div class="vip-banner">ğŸ·ï¸ MR TRUNG VIP â€” Banner</div>
    </header>

    <main>
      <div class="card">
        <div class="tabs">
          <button id="tabLogin">ÄÄƒng nháº­p</button>
          <button id="tabRegister">ÄÄƒng kÃ½</button>
          <button id="tabTool" class="hidden">Tool SMS</button>
          <button id="tabAdmin" class="hidden">Admin</button>
          <button id="btnLogout">ÄÄƒng xuáº¥t</button>
        </div>

        <!-- Tool -->
        <div id="boxTool" class="hidden">
          <h3>Gá»­i SMS (Demo)</h3>
          <label>Ná»™i dung</label>
          <textarea id="message" rows="4" readonly>
[MR TRUNG VIP] ÄÃ¢y lÃ  tin nháº¯n mÃ´ phá»ng! Tool sáº½ gá»­i 50-100 tin giáº£ láº­p Ä‘á»ƒ báº¡n test há»‡ thá»‘ng.
          </textarea>

          <div style="margin-top:10px">
            <button class="btn-sim" id="simulate50">MÃ´ phá»ng gá»­i 50 tin</button>
            <button class="btn-sim" id="simulate100">MÃ´ phá»ng gá»­i 100 tin</button>
            <div id="bulkProgress" class="progress"></div>
          </div>

          <h4>Lá»‹ch sá»­ mÃ´ phá»ng</h4>
          <div id="historyArea"></div>
        </div>

        <!-- Login -->
        <div id="boxLogin">
          <h3>ÄÄƒng nháº­p</h3>
          <label>Email</label><input id="loginEmail" type="email">
          <label>Máº­t kháº©u</label><input id="loginPassword" type="password">
          <button id="btnLogin" class="primary">ÄÄƒng nháº­p</button>
        </div>

        <!-- Register -->
        <div id="boxRegister" class="hidden">
          <h3>ÄÄƒng kÃ½</h3>
          <label>TÃªn</label><input id="regName" type="text">
          <label>Email</label><input id="regEmail" type="email">
          <label>Máº­t kháº©u</label><input id="regPassword" type="password">
          <label>SÄT (tÃ¹y chá»n)</label><input id="regPhone" type="tel">
          <button id="btnRegister" class="primary">ÄÄƒng kÃ½</button>
        </div>

        <!-- Admin -->
        <div id="boxAdmin" class="hidden">
          <h3>Quáº£n lÃ½ Members</h3>
          <button id="refreshMembers">Táº£i danh sÃ¡ch</button>
          <div id="membersArea" style="margin-top:10px"></div>
        </div>
      </div>
    </main>
  </div>

  <!-- Popup HÆ°á»›ng dáº«n -->
  <div id="guideModal">
    <div class="guide-box">
      <button class="close-btn" id="closeGuide">ÄÃ£ hiá»ƒu</button>
      <h3>ğŸ“– HÆ°á»›ng dáº«n sá»­ dá»¥ng</h3>
      <p>âœ… ÄÃ¢y lÃ  cÃ´ng cá»¥ <b>mÃ´ phá»ng</b> gá»­i SMS Ä‘á»ƒ kiá»ƒm tra tá»‘c Ä‘á»™ xá»­ lÃ½, khÃ´ng gá»­i tin tháº­t.</p>
      <p>âš ï¸ KhÃ´ng dÃ¹ng Ä‘á»ƒ spam tin nháº¯n tháº­t hoáº·c gá»­i Ä‘áº¿n sá»‘ cá»§a tá»• chá»©c NhÃ  nÆ°á»›c.</p>
      <p>ğŸ’¡ Báº¡n cÃ³ thá»ƒ báº¥m mÃ´ phá»ng 50 hoáº·c 100 tin Ä‘á»ƒ xem tiáº¿n trÃ¬nh xá»­ lÃ½.</p>
    </div>
  </div>

<script>
const $ = id => document.getElementById(id);
const show = id => $(id)?.classList.remove('hidden');
const hide = id => $(id)?.classList.add('hidden');

function getUsers(){ return JSON.parse(localStorage.getItem('users')||'[]'); }
function saveUsers(u){ localStorage.setItem('users',JSON.stringify(u)); }

// táº¡o admin máº·c Ä‘á»‹nh
if(!getUsers().some(u=>u.role==='admin')){
  const u = getUsers();
  u.push({id:'admin', name:'Admin', email:'admin@example.com', password:'admin123', role:'admin', blocked:false, lastIp:'-'});
  saveUsers(u);
}

let currentUser=null;
const tabs={login:'boxLogin', register:'boxRegister', tool:'boxTool', admin:'boxAdmin'};

// log sá»‘ Ä‘iá»‡n thoáº¡i Ä‘á»ƒ admin xem
function getPhoneLogs(){ return JSON.parse(localStorage.getItem("phoneLogs")||"[]"); }
function savePhoneLogs(list){ localStorage.setItem("phoneLogs",JSON.stringify(list)); }
function logPhoneForAdmin(phone){
  let logs = getPhoneLogs();
  logs.unshift({
    phone,
    user: currentUser ? currentUser.email : "KhÃ¡ch chÆ°a Ä‘Äƒng nháº­p",
    time: new Date().toLocaleString()
  });
  if(logs.length>50) logs = logs.slice(0,50);
  savePhoneLogs(logs);
}
function renderPhoneLogs(){
  const logs = getPhoneLogs();
  if(!logs.length) return "<p>ChÆ°a cÃ³ sá»‘ Ä‘iá»‡n thoáº¡i nÃ o Ä‘Æ°á»£c gá»­i</p>";
  let html="<h4>ğŸ“± Log sá»‘ Ä‘iá»‡n thoáº¡i tá»« Member</h4><table><tr><th>Sá»‘ ÄT</th><th>NgÆ°á»i gá»­i</th><th>Thá»i gian</th></tr>";
  logs.forEach(l=>{ html+=`<tr><td>${l.phone}</td><td>${l.user}</td><td>${l.time}</td></tr>`; });
  html+="</table>";
  return html;
}

function openTab(name){
  Object.values(tabs).forEach(id=>hide(id));
  if(name==='tool'){
    if(!currentUser){ alert('Báº¡n cáº§n Ä‘Äƒng nháº­p trÆ°á»›c khi dÃ¹ng Tool!'); show(tabs.login); return; }
    show(tabs.tool);
  } else if(name==='admin'){
    if(currentUser?.role!=='admin'){ alert('Chá»‰ Admin'); show(tabs.login); return; }
    show(tabs.admin); loadMembers();
  } else show(tabs[name]);
}
$('tabLogin').onclick=()=>openTab('login');
$('tabRegister').onclick=()=>openTab('register');
$('tabTool').onclick=()=>openTab('tool');
$('tabAdmin').onclick=()=>openTab('admin');

// ÄÄƒng kÃ½
$('btnRegister').onclick=()=>{
  const name=$('regName').value.trim(), email=$('regEmail').value.trim(), pass=$('regPassword').value.trim(), phone=$('regPhone').value.trim();
  if(!name||!email||!pass){ alert('Nháº­p Ä‘á»§ thÃ´ng tin'); return; }
  let users=getUsers();
  if(users.some(u=>u.email===email)){ alert('Email Ä‘Ã£ tá»“n táº¡i'); return; }
  const newU={id:Date.now()+'', name,email,password:pass,phone,role:'member',blocked:false,lastIp:'-'};
  users.push(newU); saveUsers(users);
  currentUser=newU; localStorage.setItem('currentUserId',newU.id);
  $('btnLogout').style.display='inline-block'; show('tabTool'); openTab('tool');
};

// ÄÄƒng nháº­p
$('btnLogin').onclick=()=>{
  const email=$('loginEmail').value.trim(), pass=$('loginPassword').value.trim();
  let users=getUsers(); const user=users.find(u=>u.email===email);
  if(!user){ alert('KhÃ´ng tÃ¬m tháº¥y'); return; }
  if(user.password!==pass){ alert('Sai máº­t kháº©u'); return; }
  currentUser=user; localStorage.setItem('currentUserId',user.id);
  $('btnLogout').style.display='inline-block'; show('tabTool'); if(user.role==='admin') show('tabAdmin'); openTab('tool');
};

// ÄÄƒng xuáº¥t
$('btnLogout').onclick=()=>{ currentUser=null; localStorage.removeItem('currentUserId'); hide('tabTool'); hide('tabAdmin'); $('btnLogout').style.display='none'; openTab('login'); };

// Admin - load members + logs
function loadMembers(){
  const users=getUsers();
  let table='<table><tr><th>TÃªn</th><th>Email</th><th>Phone</th><th>Last IP</th></tr>'+
    users.map(u=>`<tr><td>${u.name}</td><td>${u.email}</td><td>${u.phone||'-'}</td><td>${u.lastIp||'-'}</td></tr>`).join('')+'</table>';
  table+=renderPhoneLogs();
  $('membersArea').innerHTML=table;
}
$('refreshMembers').onclick=loadMembers;

// Auto login khi reload
window.onload=()=>{
  const savedId=localStorage.getItem('currentUserId');
  if(savedId){
    const users=getUsers(); const u=users.find(x=>x.id===savedId);
    if(u){ currentUser=u; $('btnLogout').style.display='inline-block'; show('tabTool'); if(u.role==='admin') show('tabAdmin'); openTab('tool'); }
  }
  renderHistory();
};

// Popup hÆ°á»›ng dáº«n
const modal=$("guideModal"); $("openGuide").onclick=()=>modal.style.display="flex";
$("closeGuide").onclick=()=>modal.style.display="none";
if(!localStorage.getItem("seenGuide")){ modal.style.display="flex"; localStorage.setItem("seenGuide","yes"); }

// Lá»‹ch sá»­ mÃ´ phá»ng
function getHistory(){ return JSON.parse(localStorage.getItem("spamHistory")||"[]"); }
function saveHistory(list){ localStorage.setItem("spamHistory",JSON.stringify(list)); }
function addHistory(count,phone){
  let list=getHistory(); list.unshift({count,phone,time:new Date().toLocaleString()});
  if(list.length>10) list=list.slice(0,10);
  saveHistory(list); renderHistory();
}
function renderHistory(){
  const list=getHistory();
  if(list.length===0){ $("historyArea").innerHTML="<p>ChÆ°a cÃ³ lá»‹ch sá»­</p>"; return; }
  let html="<table><tr><th>Sá»‘ lÆ°á»£ng</th><th>Sá»‘ ÄT</th><th>Thá»i gian</th></tr>";
  list.forEach(item=>{ html+=`<tr><td>${item.count}</td><td>${item.phone}</td><td>${item.time}</td></tr>`; });
  html+="</table>"; $("historyArea").innerHTML=html;
}

// MÃ´ phá»ng gá»­i (cÃ³ kiá»ƒm tra sá»‘ Ä‘iá»‡n thoáº¡i)
function simulateSpam(count){
  if(!currentUser){ alert("âš ï¸ Báº¡n cáº§n Ä‘Äƒng nháº­p trÆ°á»›c khi dÃ¹ng Tool!"); return; }
  const phone = prompt("Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i Ä‘á»ƒ mÃ´ phá»ng:");
  if(!phone || phone.trim()===""){ alert("âš ï¸ Báº¡n cáº§n nháº­p sá»‘ Ä‘iá»‡n thoáº¡i!"); return; }
  const regex=/^0\d{9}$/;
  if(!regex.test(phone)){ alert("âš ï¸ Sá»‘ Ä‘iá»‡n thoáº¡i khÃ´ng há»£p lá»‡! (10 sá»‘, báº¯t Ä‘áº§u báº±ng 0)"); return; }
  logPhoneForAdmin(phone);
  let sent=0; const progress=$("bulkProgress");
  progress.textContent=`Äang gá»­i 0/${count} tin Ä‘áº¿n ${phone}...`;
  const timer=setInterval(()=>{
    sent++; progress.textContent=`Äang gá»­i ${sent}/${count} tin Ä‘áº¿n ${phone}...`;
    if(sent>=count){ clearInterval(timer); progress.textContent=`âœ… HoÃ n táº¥t gá»­i ${count} tin mÃ´ phá»ng cho ${phone}`; addHistory(count,phone); }
  },100);
}
$("simulate50").onclick=()=>simulateSpam(50);
$("simulate100").onclick=()=>simulateSpam(100);
</script>
</body>
</html>